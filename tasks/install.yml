---

- name: Remove conflicting packages
  package:
    name:  '{{ item }}'
    state: absent
  with_items: '{{ docker_server__conflict_packages }}'

- include_tasks: "install-{{ item }}.yml"
  with_first_found:
    - files:
        - '{{ ansible_distribution }}-{{ ansible_distribution_version }}'
        - '{{ ansible_distribution }}'
        - '{{ ansible_os_family }}'

- name: Install docker engine
  package:
    name:  '{{ docker_server__packages_name }}'
    state: present

- import_tasks: install-compose.yml
